<Page x:Class="MigracaoAD.UI.Views.CredentialsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <ScrollViewer VerticalScrollBarVisibility="Auto">
    <StackPanel Margin="12">
      <TextBlock Text="Credenciais &amp; Acesso Remoto" FontSize="20" FontWeight="Bold"/>
      <TextBlock TextWrapping="Wrap" Margin="0,4,0,12">
        <Run Text="Configure as credenciais para acesso remoto aos servidores."/>
        <LineBreak/>
        <Run Text="O aplicativo ir√° configurar TUDO automaticamente via WinRM/SSH." FontWeight="Bold"/>
      </TextBlock>

      <!-- Servidor Local (Origem) -->
      <Border Background="#2A2A2A" Padding="12" Margin="0,0,0,12" CornerRadius="4">
        <StackPanel>
          <TextBlock Text="üñ•Ô∏è Servidor Local (Origem)" FontSize="16" FontWeight="Bold" Foreground="#4A9EFF"/>
          
          <TextBlock Text="M√©todo de Conex√£o:" Margin="0,8,0,4"/>
          <ComboBox x:Name="SourceConnectionMethod" SelectedIndex="0">
            <ComboBoxItem Content="WinRM (PowerShell Remoting) - Recomendado"/>
            <ComboBoxItem Content="SSH (OpenSSH/PuTTY)"/>
            <ComboBoxItem Content="PSExec (Sysinternals)"/>
          </ComboBox>

          <TextBlock Text="Usu√°rio:" Margin="0,8,0,4"/>
          <TextBox x:Name="SourceUsername" Text="Administrator"/>
          <TextBlock Text="Ex: Administrator, DOMINIO\usuario" FontSize="10" Foreground="Gray"/>

          <TextBlock Text="Senha:" Margin="0,8,0,4"/>
          <PasswordBox x:Name="SourcePassword"/>

          <CheckBox x:Name="SourceUseDomainCreds" Content="Usar credenciais de dom√≠nio" Margin="0,8,0,0"/>
          <TextBlock TextWrapping="Wrap" FontSize="10" Foreground="Gray" Margin="0,4,0,0">
            Se marcado, usa DOMINIO\usuario. Caso contr√°rio, usa credencial local.
          </TextBlock>

          <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
            <Button x:Name="TestSourceConnection" Content="üîç Testar Conex√£o" Padding="8,4" Click="TestSourceConnection_Click"/>
            <TextBlock x:Name="SourceConnectionStatus" VerticalAlignment="Center" Margin="8,0,0,0"/>
          </StackPanel>
        </StackPanel>
      </Border>

      <!-- Servidor Nuvem (Destino) -->
      <Border Background="#2A2A2A" Padding="12" Margin="0,0,0,12" CornerRadius="4">
        <StackPanel>
          <TextBlock Text="‚òÅÔ∏è Servidor Nuvem (Destino)" FontSize="16" FontWeight="Bold" Foreground="#4AFF9E"/>
          
          <TextBlock Text="M√©todo de Conex√£o:" Margin="0,8,0,4"/>
          <ComboBox x:Name="TargetConnectionMethod" SelectedIndex="0">
            <ComboBoxItem Content="WinRM (PowerShell Remoting) - Recomendado"/>
            <ComboBoxItem Content="SSH (OpenSSH/PuTTY)"/>
            <ComboBoxItem Content="PSExec (Sysinternals)"/>
          </ComboBox>

          <TextBlock Text="Usu√°rio:" Margin="0,8,0,4"/>
          <TextBox x:Name="TargetUsername" Text="Administrator"/>
          <TextBlock Text="Ex: Administrator (local antes de promover a DC)" FontSize="10" Foreground="Gray"/>

          <TextBlock Text="Senha:" Margin="0,8,0,4"/>
          <PasswordBox x:Name="TargetPassword"/>

          <CheckBox x:Name="TargetUseDomainCreds" Content="Usar credenciais de dom√≠nio (ap√≥s promote)" Margin="0,8,0,0"/>
          <TextBlock TextWrapping="Wrap" FontSize="10" Foreground="Gray" Margin="0,4,0,0">
            Marque apenas se o servidor j√° for DC. Caso contr√°rio, use credencial local.
          </TextBlock>

          <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
            <Button x:Name="TestTargetConnection" Content="üîç Testar Conex√£o" Padding="8,4" Click="TestTargetConnection_Click"/>
            <TextBlock x:Name="TargetConnectionStatus" VerticalAlignment="Center" Margin="8,0,0,0"/>
          </StackPanel>
        </StackPanel>
      </Border>

      <!-- Configura√ß√£o Autom√°tica -->
      <Border Background="#2A2A2A" Padding="12" Margin="0,0,0,12" CornerRadius="4">
        <StackPanel>
          <TextBlock Text="‚öôÔ∏è Configura√ß√£o Autom√°tica" FontSize="16" FontWeight="Bold" Foreground="#FFD700"/>
          
          <TextBlock TextWrapping="Wrap" Margin="0,8,0,8">
            O aplicativo pode configurar automaticamente os servidores:
          </TextBlock>

          <StackPanel Margin="12,0,0,0">
            <TextBlock Text="‚Ä¢ Habilitar WinRM/PowerShell Remoting" Foreground="Gray"/>
            <TextBlock Text="‚Ä¢ Configurar IP est√°tico e DNS" Foreground="Gray"/>
            <TextBlock Text="‚Ä¢ Abrir portas no firewall (AD, RPC, SMB, etc.)" Foreground="Gray"/>
            <TextBlock Text="‚Ä¢ Instalar roles (AD DS, DFS, File Server)" Foreground="Gray"/>
            <TextBlock Text="‚Ä¢ Preparar discos para shares" Foreground="Gray"/>
          </StackPanel>

          <CheckBox x:Name="AutoConfigureSource" Content="Configurar servidor local automaticamente" Margin="0,12,0,4" IsChecked="True"/>
          <CheckBox x:Name="AutoConfigureTarget" Content="Configurar servidor nuvem automaticamente" Margin="0,4,0,0" IsChecked="True"/>

          <TextBlock TextWrapping="Wrap" FontSize="10" Foreground="Orange" Margin="0,8,0,0">
            ‚ö†Ô∏è A configura√ß√£o autom√°tica requer acesso administrativo aos servidores.
            Se WinRM n√£o estiver habilitado, o app tentar√° habilit√°-lo via SSH/PSExec.
          </TextBlock>
        </StackPanel>
      </Border>

      <!-- Op√ß√µes Avan√ßadas -->
      <Expander Header="üîß Op√ß√µes Avan√ßadas" Margin="0,0,0,12">
        <StackPanel Margin="12,8,0,0">
          <TextBlock Text="Porta WinRM HTTP:" Margin="0,0,0,4"/>
          <TextBox x:Name="WinRMPortHTTP" Text="5985"/>

          <TextBlock Text="Porta WinRM HTTPS:" Margin="0,8,0,4"/>
          <TextBox x:Name="WinRMPortHTTPS" Text="5986"/>

          <TextBlock Text="Porta SSH:" Margin="0,8,0,4"/>
          <TextBox x:Name="SSHPort" Text="22"/>

          <CheckBox x:Name="UseHTTPS" Content="Usar HTTPS para WinRM (requer certificado)" Margin="0,8,0,0"/>
          <CheckBox x:Name="SkipCACheck" Content="Ignorar verifica√ß√£o de certificado" Margin="0,4,0,0" IsChecked="True"/>
          <CheckBox x:Name="SkipCNCheck" Content="Ignorar verifica√ß√£o de CN" Margin="0,4,0,0" IsChecked="True"/>
          
          <TextBlock Text="Timeout (segundos):" Margin="0,8,0,4"/>
          <TextBox x:Name="ConnectionTimeout" Text="30"/>
        </StackPanel>
      </Expander>

      <!-- Informa√ß√µes -->
      <Border Background="#1A1A1A" Padding="12" CornerRadius="4">
        <StackPanel>
          <TextBlock Text="üí° Dicas:" FontWeight="Bold" Foreground="#FFD700"/>
          <TextBlock TextWrapping="Wrap" Margin="0,4,0,0" FontSize="11" Foreground="Gray">
            ‚Ä¢ <Bold>WinRM</Bold>: M√©todo mais r√°pido e confi√°vel. Requer PowerShell Remoting habilitado.
          </TextBlock>
          <TextBlock TextWrapping="Wrap" Margin="0,2,0,0" FontSize="11" Foreground="Gray">
            ‚Ä¢ <Bold>SSH</Bold>: Alternativa se WinRM n√£o estiver dispon√≠vel. Requer OpenSSH instalado.
          </TextBlock>
          <TextBlock TextWrapping="Wrap" Margin="0,2,0,0" FontSize="11" Foreground="Gray">
            ‚Ä¢ <Bold>PSExec</Bold>: √öltima op√ß√£o. Requer compartilhamento ADMIN$ acess√≠vel.
          </TextBlock>
          <TextBlock TextWrapping="Wrap" Margin="0,8,0,0" FontSize="11" Foreground="Orange">
            ‚ö†Ô∏è Se nenhum m√©todo funcionar, o app oferecer√° baixar um agente leve para instalar manualmente.
          </TextBlock>
        </StackPanel>
      </Border>
    </StackPanel>
  </ScrollViewer>
</Page>

